package main

import "fmt"

// updateSlice получает срез чисел s []int
// Cрез (slice) в Go — это структура,
// содержащая три элемента:
//   1. Указатель на массив (настоящие данные)
//   2. Длину (len)
//   3. Вместимость (cap)
//
// При передаче среза в функцию Go копирует только саму структуру,
// но не массив, на который она ссылается. Поэтому изменения
// элементов по индексу изменяют исходный массив в main().
//
// Однако если в функции произойдёт append() и не хватит места
// в исходном массиве, Go создаст новый массив, и это изменение
// не будет видно в main().

func updateSlice(s []int) {
	// Проходим по всем элементам среза
	for i := 0; i < len(s); i++ {
		// Если элемент нечётный
		if s[i]%2 != 0 {
			// Увеличиваем его на 10
			s[i] += 10
		}
	}

	// Добавляем новый элемент 999 в конец среза
	// Если вместимости (cap) не хватает,
	// Go создаёт новый массив, и этот новый массив
	// будет существовать только внутри функции.
	s = append(s, 999)

	// Это добавление не повлияет на оригинальный срез в main().
	// Чтобы увидеть изменение длины, нужно вернуть новый срез.
}

// -----------------------------------------------------------
// updateNumber получает указатель на число x *int
// -----------------------------------------------------------
// В Go аргументы передаются по значению. Поэтому если нужно
// изменить значение переменной из функции, надо передать её
// адрес (указатель).
//
// С помощью оператора * (разыменование) можно получить
// и изменить исходное значение по адресу.
// -----------------------------------------------------------
func updateNumber(x *int) {
	*x += 100 // увеличиваем оригинальное число на 100
}

func main() {
	// Создаём срез чисел (slice)
	nums := []int{1, 2, 3, 4, 5}

	// Создаём отдельную переменную
	a := 5

	// Выводим исходные значения
	fmt.Println("До функций:")
	fmt.Println("nums:", nums)
	fmt.Println("a:", a)

	// Передаём срез в функцию
	updateSlice(nums)

	// Передаём адрес числа a в функцию
	updateNumber(&a)

	// Проверяем результаты после вызова функций
	fmt.Println("\nПосле функций:")
	fmt.Println("nums:", nums) // элементы среза изменены
	fmt.Println("a:", a)       // значение увеличено на 100
}

/*
---------------------------------------------------------------
РЕЗУЛЬТАТ РАБОТЫ ПРОГРАММЫ:

До функций:
nums: [1 2 3 4 5]
a: 5

После функций:
nums: [11 2 13 4 15]
a: 105

Пояснение:
- Срез изменился, потому что элементы изменяются по ссылке.
- Элемент 999 не добавился, так как append() создал новый массив
  внутри функции, невидимый в main().
- Переменная a изменилась, потому что передали её адрес (&a).
---------------------------------------------------------------
*/
